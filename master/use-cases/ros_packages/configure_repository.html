

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script defer data-domain="rtw.stoglrobotics.de" src="https://plausible.io/js/script.js"></script>
  
  <title>Configure Repository &mdash; ROS Team Workspace Documentation: Galactic Sep 2023 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon-bg.png"/>
  

  
  

  
    <link rel="canonical" href="https://rtw.stoglrobotics.de/galactic//galactic/use-cases/ros_packages/configure_repository.html" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Create New Package" href="create_package.html" />
    <link rel="prev" title="Setup a new Workspace" href="../operating_system/create_setup_workspace.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/galactic-small.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guidelines/index.html">Guidelines</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Use Cases</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../operating_system/create_setup_workspace.html">Setup a new Workspace</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Configure Repository</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setup-repository-ci-configuration-github">Setup Repository CI configuration (GitHub)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#details-about-ci-setup-and-created-workflows">Details about CI setup and created workflows</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#code-formatters-and-linters">Code formatters and linters</a></li>
<li class="toctree-l5"><a class="reference internal" href="#building-packages">Building packages</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="create_package.html">Create New Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_robot_bringup_package.html">Setup robot bringup</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup_robot_description_package.html">Setup robot description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ros2_control/setup_controller.html">ros2_control: Setup controller package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ros2_control/setup_robot_hardware_interface.html">ros2_control: Setup robot’s hardware package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ros_workspaces/aliases.html">RTW Aliases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../docker/index.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq/index.html">FAQ</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ROS Team Workspace Documentation: Galactic</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Use Cases</a> &raquo;</li>
        
      <li>Configure Repository</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/StoglRobotics/ros_team_workspace/blob/master//docs/use-cases/ros_packages/configure_repository.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="configure-repository">
<h1>Configure Repository<a class="headerlink" href="#configure-repository" title="Permalink to this headline"></a></h1>
<section id="setup-repository-ci-configuration-github">
<span id="uc-configure-repo"></span><h2>Setup Repository CI configuration (GitHub)<a class="headerlink" href="#setup-repository-ci-configuration-github" title="Permalink to this headline"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">setup-repository-ci</span></code> script is used, accepting the github repository name and github user/organization namespace as parameters.</p>
<blockquote>
<div><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The script <strong>has to be executed</strong> from the <em>main</em> folder of your package.</p>
</div>
</div></blockquote>
<div class="literal-block-wrapper docutils container" id="setup-package-ci">
<div class="code-block-caption"><span class="caption-text">Usage of the script for setting up new packages.</span><a class="headerlink" href="#setup-package-ci" title="Permalink to this code"></a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>setup-repository-ci<span class="w"> </span><span class="s2">&quot;repo_name&quot;</span><span class="w"> </span><span class="s2">&quot;repo_namespace&quot;</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;first_package second_package ...&quot;</span><span class="o">]</span>
</pre></div>
</div>
</div>
<p>When executing the script, read all output carefully.
If you make any wrong decision or enter incorrect data, use &lt;CTRL&gt;+C keys to terminate the script.</p>
<p>The script can add setup for multiple ROS 2 versions.
Simply follow the output.</p>
<p>After a setup is created, you should go through the files and check if they are correct.
Please remember that each workflow you would like to run on schedule has to be in the default branch of your repository.
Then try to push new files to a GitHub-repository and open a PR.
You should then already see new workflows active.</p>
<section id="details-about-ci-setup-and-created-workflows">
<h3>Details about CI setup and created workflows<a class="headerlink" href="#details-about-ci-setup-and-created-workflows" title="Permalink to this headline"></a></h3>
<section id="code-formatters-and-linters">
<h4>Code formatters and linters<a class="headerlink" href="#code-formatters-and-linters" title="Permalink to this headline"></a></h4>
<p>For executing formatters, <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> program is used and automatically setup.
To use it in a cloned repository (if there is <code class="docutils literal notranslate"><span class="pre">.pre-commit-conifg.yaml</span></code> file), execute once <code class="docutils literal notranslate"><span class="pre">pre-commit</span> <span class="pre">install</span></code>.
Clang-Format is used as the main code formatting program.</p>
</section>
<section id="building-packages">
<h4>Building packages<a class="headerlink" href="#building-packages" title="Permalink to this headline"></a></h4>
<p>This script creates three stages of build configuration for each ROS 2 version.
Each of those stages test different compatibility levels where users can experience issues with actively developed repositories and ensures future compatibility of the repository.
In the following each stage is explained.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">binary</span></code></dt><dd><p>Building against released packages in a ROS distribution. The stage ensures that isolated builds on a local machine and build-farm are possible. Unreleased dependencies can be defined in <code class="docutils literal notranslate"><span class="pre">.repos</span></code>-file with suffix <code class="docutils literal notranslate"><span class="pre">-not-released.&lt;ros-distro&gt;.repos</span></code>. This functionality is useful for new projects where packages are located in multiple repositories and when packages are released in a new ROS distribution (and you are not releasing regularly to <code class="docutils literal notranslate"><span class="pre">rolling</span></code>).
The <code class="docutils literal notranslate"><span class="pre">binary</span></code> build has two workflows to build against <code class="docutils literal notranslate"><span class="pre">main</span></code> and <code class="docutils literal notranslate"><span class="pre">testing</span></code> ROS debian repositories. This is useful when for example API changes are done that involve multiple packages. Then it is expected that build against binary packages in the <code class="docutils literal notranslate"><span class="pre">main</span></code> repository fails, but if all the changes are released, building against <code class="docutils literal notranslate"><span class="pre">testing</span></code> repository has to work. Otherwise it means that the code has some regressions and cannot be synced to the <code class="docutils literal notranslate"><span class="pre">main</span></code> repositories (This is what is happening after maintainers from OpenRobotics announce a “Sync” or a ROS distribution).
Scheduled <code class="docutils literal notranslate"><span class="pre">binary</span></code> build warns you that your package is incompatible with released dependencies (<code class="docutils literal notranslate"><span class="pre">main</span></code>) or that a package is breaking changes that will be released (<code class="docutils literal notranslate"><span class="pre">testing</span></code>). The first case should actually never happen if you are using all three building stages.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">semi-binary</span></code></dt><dd><p>Building against released core packages in a ROS distribution, but the main dependencies are build from source. The dependencies are defined in <code class="docutils literal notranslate"><span class="pre">.repos</span></code>-file with suffix <code class="docutils literal notranslate"><span class="pre">.&lt;ros-distro&gt;.repos</span></code>. This functionality is useful during development process when you have to sync changes in multiple repositories which are not released yet. This is the stage which should never fail if you are keeping your code up to date. Scheduled <code class="docutils literal notranslate"><span class="pre">semi-binary</span></code> builds warn you that some important dependency has changed something in their code so you can prepare yourself better for the next release.
There are two workflows building against <code class="docutils literal notranslate"><span class="pre">main</span></code> and <code class="docutils literal notranslate"><span class="pre">testing</span></code> ROS repositories with released packages.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">source</span></code></dt><dd><p>Core ROS packages are build from source. Expects the <code class="docutils literal notranslate"><span class="pre">.repos</span></code> files for ROS core and the <code class="docutils literal notranslate"><span class="pre">.repos</span></code>-file with suffix <code class="docutils literal notranslate"><span class="pre">.&lt;ros-distro&gt;.repos</span></code> for the package-specific dependencies. This stage makes mostly sense when working with <code class="docutils literal notranslate"><span class="pre">rolling</span></code> since other distribution of ROS should be API stable once released. This stage helps to anticipate breaking changes in the ROS API that will be relevant the mid-term future.</p>
</dd>
</dl>
<p>For the better overview and to avoid confusion for users, there are two different tables with the workflow overview.
One in the README file showing only the <code class="docutils literal notranslate"><span class="pre">binary</span></code> and <code class="docutils literal notranslate"><span class="pre">semi-binary</span></code> builds against <code class="docutils literal notranslate"><span class="pre">main</span></code> ROS repository, and another in the <code class="docutils literal notranslate"><span class="pre">.github/workflows/README.md</span></code> that shows all the workflows.</p>
</section>
</section>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="create_package.html" class="btn btn-neutral float-right" title="Create New Package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../operating_system/create_setup_workspace.html" class="btn btn-neutral float-left" title="Setup a new Workspace" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2023, Stogl Robotics Consulting UG (haftungsbeschränkt).

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: master
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>ROS Team Workspace - Galactic and Rolling</dt>
      <dd><a href="configure_repository.html">Master (latest)</a></dd>
    </dl>
    <dl>
      <dt>ROS Team Workspace - Foxy</dt>
        <dd><a href="../../../foxy/use-cases/ros_packages/configure_repository.html">Foxy</a></dd>
   </dl>
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>